在userinit执行后，swtch调度这个进程，设置好的ret会跳进forkret函数中，接着会调用usertrapret函数。usertrapret设置w_stvec=uservec，接着进入trampoline.s的userret中，userret最后会执行sret指令，恢复到init进程，这是第一个用户进程。此时在用户态下，如果发生了中断根据之前设置的stvec进入uservec中，uservec最后会进入usertrap中，此时设置w_stevc=kernelvec，在usertrap中如果发生中断这是在内核中，因此会进入到kernelvec函数，kernelvec他后续会去kerneltrap进行中断处理最后执行sret指令回到epc寄存器记录的位置，如果usertrap中没有发生中断，在usertrap的后续中也会进行相应的中断处理，最后执行usertrapret，usertrapret又设置w_stvec=uservec，以便是正确处理来自用户态下的中断